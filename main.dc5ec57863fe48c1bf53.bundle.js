webpackJsonp([1,4],{126:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(456),a=i(455),l=i(69);i(619);var p=function(){function e(e){var t=this;this.player=new s.Player,this.opponent=new s.Player,e.events.filter(function(e){return e instanceof l.NavigationStart}).subscribe(function(e){"/battle"===e.url&&(t.opponent.randomSet(),t.game=new a.Game),"/preparing"===e.url&&t.player.clearBatte()})}return e.prototype.opponentAI=function(){var e,t=[],i=[];if(this.player.field.map(function(e){return e.map(function(e){if(e.isFired&&e.isShip)for(var r=0;r<e.allNeighbors.length;r++)e.allNeighbors[r].isFired||i.push(e.allNeighbors[r]);e.isFired||t.push(e)})}),i.length)e=i[Math.floor(Math.random()*i.length)];else{for(var r=[],n=0,o=0;o<t.length;o++){for(var s=0,a=0;a<t[o].allNeighbors.length;a++)t[o].allNeighbors[a].isFired||s++;n=Math.max(n,s)}for(var o=0;o<t.length;o++){for(var s=0,a=0;a<t[o].allNeighbors.length;a++)t[o].allNeighbors[a].isFired||s++;n===s&&r.push(t[o])}e=r[Math.floor(Math.random()*r.length)]}return e},e.prototype.fire=function(e){var t=this;if(this.game.isHumanTurn&&!e.isFired&&!this.opponent.allShipsAreOnFire()&&!this.player.allShipsAreOnFire()&&(this.game.turnNumber++,this.opponent.getFired(e),!this.opponent.allShipsAreOnFire())){this.game.isHumanTurn=!1;var i=this;setTimeout(function(){i.player.getFired(t.opponentAI()),i.game.isHumanTurn=!0},150)}},e=r([o.Injectable(),n("design:paramtypes",["function"==typeof(t=void 0!==l.Router&&l.Router)&&t||Object])],e);var t}();t.PlayerService=p},282:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(126),a=function(){function e(e){this.playerService=e,this.player=this.playerService.player,this.opponent=this.playerService.opponent,this.game=this.playerService.game}return e.prototype.onOpponentFieldClick=function(e){this.playerService.fire(e)},e=r([o.Component({selector:"app-battle-component",template:i(614),styles:[i(323)]}),n("design:paramtypes",["function"==typeof(t=void 0!==s.PlayerService&&s.PlayerService)&&t||Object])],e);var t}();t.BattleComponent=a},283:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(69),a=i(126),l=function(){function e(e,t){this.playerService=e,this.router=t}return e.prototype.canActivate=function(e,t){return this.checkPlayerShips()},e.prototype.checkPlayerShips=function(){var e=this.playerService.player.allShipsArePlaced();return e||this.router.navigateByUrl("/preparing"),e},e=r([o.Injectable(),n("design:paramtypes",["function"==typeof(t=void 0!==a.PlayerService&&a.PlayerService)&&t||Object,"function"==typeof(i=void 0!==s.Router&&s.Router)&&i||Object])],e);var t,i}();t.BattleGuard=l},284:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(123),a=i(69),l=function(){function e(e,t){this.title=e,this.router=t,this.normalTitle="",this.title404="404 Not Found"}return e.prototype.ngOnInit=function(){this.normalTitle=this.title.getTitle(),this.title.setTitle(this.title404)},e.prototype.goToMain=function(){this.title.setTitle(this.normalTitle),this.router.navigateByUrl("/")},e=r([o.Component({template:'\n        <h2>{{title404}}</h2>\n        <a class="href" (click)="goToMain()">Main page</a>\n    ',styles:["\n        .href {\n            text-decoration: underline;\n            cursor: pointer;\n        }\n        "]}),n("design:paramtypes",["function"==typeof(t=void 0!==s.Title&&s.Title)&&t||Object,"function"==typeof(i=void 0!==a.Router&&a.Router)&&i||Object])],e);var t,i}();t.PageNotFoundComponent=l},285:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(69),a=i(126),l=function(){function e(e,t,i){this.router=e,this.playerService=t,this.componentElement=i,this.player=this.playerService.player}return e.prototype.onDragStart=function(e,t){if(!t)return!1;this.draggedShip=t,this.draggedShip.isInAir=!0,t.isOnField&&this.player.removeShipFromField(t);var i=document.createElement("div");i.style.transform="translateX(-1000px)",i.style.textAlign="left",this.componentElement.nativeElement.appendChild(i);for(var r=0;r<t.blocks.length;r++){var n=document.createElement("div");n.classList.add("part"),n.classList.add("part"+t.blocks.length+"_"+(r+1)),n.className+=t.isVertical&&1!==t.blocks.length?"":" shipHoriszontal",n.style.transform=t.isVertical?"rotate(90deg)":"",n.style.display=t.isVertical?"block":"inline-block",i.appendChild(n)}e.dataTransfer.setData("Text","Text"),e.dataTransfer.setDragImage(i,75,75),setTimeout(function(){return i.remove()})},e.prototype.onDragOver=function(e,t){e.preventDefault(),this.player.markFieldUnderShip(t,this.draggedShip,!0)},e.prototype.onDragLeave=function(e,t){e.preventDefault(),this.player.markFieldUnderShip(t,this.draggedShip,!1)},e.prototype.onDrop=function(e,t){e.preventDefault(),this.player.tryToPlaceShip(t,this.draggedShip),this.draggedShip.isInAir=!1,this.draggedShip=void 0},e.prototype.onDragEnd=function(e){e.preventDefault(),this.draggedShip&&(this.draggedShip.isInAir=!1,this.draggedShip=void 0)},e.prototype.preventDefault=function(e){return e.preventDefault(),!1},e.prototype.onContextMenuOnFieldShip=function(e,t){e.preventDefault(),this.player.rotateShipOnField(t,void 0)},e.prototype.onContextMenuOutsideShip=function(e,t){e.preventDefault(),t.rotate()},e=r([o.Component({selector:"app-preparing-component",template:i(615),styles:[i(323)]}),n("design:paramtypes",["function"==typeof(t=void 0!==s.Router&&s.Router)&&t||Object,"function"==typeof(l=void 0!==a.PlayerService&&a.PlayerService)&&l||Object,"function"==typeof(p=void 0!==o.ElementRef&&o.ElementRef)&&p||Object])],e);var t,l,p}();t.PreparingComponent=l},323:function(e,t){e.exports=""},343:function(e,t){function i(e){throw new Error("Cannot find module '"+e+"'.")}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=343},344:function(e,t,i){"use strict";var r=i(422),n=i(454);r.platformBrowserDynamic().bootstrapModule(n.AppModule)},452:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(69),a=i(283),l=i(285),p=i(282),c=[{path:"",redirectTo:"/preparing",pathMatch:"full"},{path:"preparing",component:l.PreparingComponent},{path:"battle",component:p.BattleComponent,canActivate:[a.BattleGuard]}],h=function(){function e(){}return e=r([o.NgModule({imports:[s.RouterModule.forRoot(c)],exports:[s.RouterModule]}),n("design:paramtypes",[])],e)}();t.AppRoutingModule=h},453:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=function(){function e(){}return e=r([o.Component({selector:"app-battleship",template:i(613),styles:[i(612)]}),n("design:paramtypes",[])],e)}();t.AppComponent=s},454:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(123),a=i(452),l=i(283),p=i(126),c=i(453),h=i(285),u=i(282),f=i(460),d=function(){function e(){}return e=r([o.NgModule({imports:[s.BrowserModule,a.AppRoutingModule,f.PageNotFoundModule],declarations:[c.AppComponent,h.PreparingComponent,u.BattleComponent],providers:[p.PlayerService,l.BattleGuard],bootstrap:[c.AppComponent]}),n("design:paramtypes",[])],e)}();t.AppModule=d},455:function(e,t,i){"use strict";var r=function(){function e(){this.isHumanTurn=!0,this.turnNumber=0}return e}();t.Game=r},456:function(e,t,i){"use strict";var r=i(457),n=i(458),o=function(){function e(){var e=this;this.ships=[],this.field=[],this.shipsBySize=[],this.shipsOnField=0,this.firedBlockCountTotal=0;for(var t=1;t<5;t++){this.shipsBySize.push([]);for(var i=0;i<t;i++)this.ships.push(new r.Ship(5-t)),this.shipsBySize[t-1].push(this.ships[this.ships.length-1])}this.shipsBySize.reverse();for(var t=0;t<10;t++){this.field.push([]);for(var i=0;i<10;i++)this.field[t].push(new n.Square(t,i))}this.field.map(function(t,i){return t.map(function(t,r){return e.calculateNeighbors(t,i,r)})})}return e.prototype.calculateNeighbors=function(e,t,i){var r=this;[[t-1,i-1],[t-1,i],[t-1,i+1],[t,i-1],[t,i+1],[t+1,i-1],[t+1,i],[t+1,i+1]].map(function(t,i){r.field[t[0]]&&r.field[t[0]][t[1]]&&(e.allNeighbors.push(r.field[t[0]][t[1]]),[0,2,5,7].indexOf(i)>-1&&e.diagonalNeighbors.push(r.field[t[0]][t[1]]),[1,3,4,6].indexOf(i)>-1&&e.linearNeighbors.push(r.field[t[0]][t[1]]),[1,6].indexOf(i)>-1&&e.verticalNeighbors.push(r.field[t[0]][t[1]]),[3,4].indexOf(i)>-1&&e.horizontalNeighbors.push(r.field[t[0]][t[1]]))})},e.prototype.getPlacesForDraggedShip=function(e,t){if(!t||!e)return[];var i=e.x,r=e.y,n=[];if(t.isVertical){for(var o=i+(t.blocks.length-1);o>=i-(t.blocks.length-1);o--)if(this.field[o]&&(this.field[o][r].isShip||this.field[o][r].isNeighborOfShip?n=[]:n.push(this.field[o][r]),n.length===t.blocks.length))return n.reverse()}else for(var o=r+(t.blocks.length-1);o>=r-(t.blocks.length-1);o--)if(this.field[i][o]&&(this.field[i][o].isShip||this.field[i][o].isNeighborOfShip?n=[]:n.push(this.field[i][o]),n.length===t.blocks.length))return n.reverse();return[]},e.prototype.tryToPlaceShip=function(e,t){var i=this.getPlacesForDraggedShip(e,t);i.length&&this.placeShip(i,t)},e.prototype.placeShip=function(e,t){e.map(function(e,i){e.isShip=!0,e.isUnderShip=!1,e.ship=t,e.blockNum=i,e.markNeighborsOfShip(),t.blocks[i]=[e.x,e.y]}),this.shipsOnField++,t.isOnField=!0},e.prototype.removeShipFromField=function(e){e.isOnField=!1,this.shipsOnField--;for(var t=0;t<e.blocks.length;t++){var i=e.blocks[t],r=this.field[i[0]][i[1]];r.isShip=!1,r.ship=void 0,r.blockNum=void 0;for(var n=0;n<r.allNeighbors.length;n++){for(var o=0,s=0;s<r.allNeighbors[n].allNeighbors.length;s++)r.allNeighbors[n].allNeighbors[s].isShip&&o++;o||(r.allNeighbors[n].isNeighborOfShip=!1)}}},e.prototype.markFieldUnderShip=function(e,t,i){this.getPlacesForDraggedShip(e,t).map(function(e){return e.isUnderShip=i})},e.prototype.rotateShipOnField=function(e,t){if(e.ship&&1!==e.ship.blocks.length){var i,r,n=e.ship;e.ship.blocks.map(function(t,n){t[0]===e.x&&t[1]===e.y&&(i=t,r=n)});var o=n.isVertical?[i[0],i[1]-r]:[i[0]-r,i[1]];o=[Math.min(Math.max(o[0],0),10),Math.min(Math.max(o[1],0),10)],this.removeShipFromField(n),n.rotate();var s=this.getPlacesForDraggedShip(this.field[o[0]][o[1]],n);if(s.length)this.placeShip(s,n);else{n.rotate();var a=this.field[n.blocks[0][0]][n.blocks[0][1]],l=this.getPlacesForDraggedShip(a,n);if(this.placeShip(l,n),t)t.splice(0,1);else{t=[];for(var p=1;p<=2;p++)n.blocks[r-p]&&t.push(n.blocks[r-p]),n.blocks[r+p]&&t.push(n.blocks[r+p])}t.length&&this.rotateShipOnField(this.field[t[0][0]][t[0][1]],t)}}},e.prototype.randomSet=function(){var e=this;this.allShipsArePlaced()&&this.clearField(),this.ships.map(function(t){if(!t.isOnField){t.isVertical=Math.random()>.5,t.isOnField=!0;var i=[];e.field.map(function(r){return r.map(function(r){var n=e.getPlacesForDraggedShip(r,t);n.length&&i.push(n)})});var r=i[Math.floor(Math.random()*i.length)];e.placeShip(r,t)}})},e.prototype.clearField=function(){this.constructor()},e.prototype.clearBatte=function(){this.firedBlockCountTotal=0,this.field.map(function(e){return e.map(function(e){e.isFired=!1})}),this.ships.map(function(e){e.firedBlockCount=0})},e.prototype.allShipsArePlaced=function(){return 10===this.shipsOnField},e.prototype.allShipsAreOnFire=function(){return 20===this.firedBlockCountTotal},e.prototype.getFired=function(e){if(!e.isFired&&(e.isFired=!0,e.isShip)){this.firedBlockCountTotal++,e.fireDiagonalNeighbors();var t=e.ship;if(t.firedBlockCount++,t.areAllBlocksFired())for(var i=0;i<t.blocks.length;i++){var r=t.blocks[i];this.field[r[0]][r[1]].fireAllNeighbors()}}},e}();t.Player=o},457:function(e,t,i){"use strict";var r=function(){function e(e){this.blocks=Array(e).fill([void 0,void 0]),this.firedBlockCount=0,this.isVertical=!1,this.isOnField=!1,this.isInAir=!1,this.isOnfire=!1,this.isDrowned=!1}return e.prototype.rotate=function(){this.isVertical=!this.isVertical},e.prototype.areAllBlocksFired=function(){return this.blocks.length===this.firedBlockCount},e}();t.Ship=r},458:function(e,t,i){"use strict";var r=function(){function e(e,t){this.x=e,this.y=t,this.isShip=!1,this.isUnderShip=!1,this.isNeighborOfShip=!1,this.isFired=!1,this.allNeighbors=[],this.diagonalNeighbors=[],this.linearNeighbors=[],this.verticalNeighbors=[],this.horizontalNeighbors=[],this.ship=void 0,this.blockNum=void 0}return e.prototype.fireDiagonalNeighbors=function(){this.diagonalNeighbors.map(function(e){return e.isFired=!0})},e.prototype.fireAllNeighbors=function(){this.allNeighbors.map(function(e){return e.isFired=!0})},e.prototype.markNeighborsOfShip=function(){this.allNeighbors.map(function(e){e.isShip||(e.isNeighborOfShip=!0)})},e}();t.Square=r},459:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(69),a=i(284),l=[{path:"**",component:a.PageNotFoundComponent}],p=function(){function e(){}return e=r([o.NgModule({imports:[s.RouterModule.forChild(l)],exports:[s.RouterModule]}),n("design:paramtypes",[])],e)}();t.PageNotFoundRoutingModule=p},460:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=i(0),s=i(75),a=i(459),l=i(284),p=function(){function e(){}return e=r([o.NgModule({imports:[s.CommonModule,a.PageNotFoundRoutingModule],declarations:[l.PageNotFoundComponent]}),n("design:paramtypes",[])],e)}();t.PageNotFoundModule=p},612:function(e,t){e.exports=".header{font-size:17px;padding:25px 0 40px;margin:0;color:#444526}.header,span{font-family:Arial,Helvetica,sans-serif}span{font-size:200%;color:#2b2d20}a,span{font-weight:700}a{font-size:100%;color:#bdc1a2}"},613:function(e,t){e.exports='<div class="header">\n  <span>BattleShip</span>\n  by Alexander Ishchenko\n  (<a href="https://github.com/qialex/Angular2-BattleShip">GitHub</a>,\n  <a href="https://www.linkedin.com/in/qialex">LinkedIn</a>,\n  <a href="http://qialex.me">CV</a>)\n</div>\n<router-outlet></router-outlet>'},614:function(e,t){e.exports='<div class="fieldBg">\r\n    <div class="shipControls">\r\n        <button class="turnIndicator" [ngClass]="{ active: !game.isHumanTurn }">\r\n            <span *ngIf="!player.allShipsAreOnFire() && !opponent.allShipsAreOnFire()">{{20 - player.firedBlockCountTotal}}</span>\r\n            <span *ngIf="player.allShipsAreOnFire()">You lose</span>\r\n            <span *ngIf="opponent.allShipsAreOnFire()">You win</span>\r\n        </button>\r\n        <button class="turnCounter">Turn: <b>{{game.turnNumber || 0}}</b></button>\r\n        <button class="turnIndicator" [ngClass]="{ active: game.isHumanTurn }">\r\n            <span *ngIf="!player.allShipsAreOnFire() && !opponent.allShipsAreOnFire()">{{20 - opponent.firedBlockCountTotal}}</span>\r\n            <span *ngIf="player.allShipsAreOnFire()">AI wins</span>\r\n            <span *ngIf="opponent.allShipsAreOnFire()">AI loses</span>\r\n        </button>\r\n    </div>\r\n    <div class="field fieldBorder">\r\n        <div *ngFor="let row of player.field" class="row">\r\n            <div *ngFor="let square of row"\r\n                 class="square"\r\n                 [ngClass]="{\r\n                    placedShip: square.isShip,\r\n                    shipIsOnFire: square.isShip && square.isFired,\r\n                    fieldIsOnFire: !square.isShip && square.isFired\r\n                 }">\r\n                <div *ngIf="square.isShip" class="part part{{square.ship.blocks.length}}_{{ square.blockNum + 1}}"\r\n                     [ngClass]="{ shipHoriszontal: square.ship && square.ship.blocks.length === 1 || square.isShip && !square.ship.isVertical }">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="field">\r\n        <div *ngFor="let row of opponent.field" class="row">\r\n            <div *ngFor="let square of row"\r\n                 class="square"\r\n                 [ngClass]="{\r\n                    placedShip: square.isShip,\r\n                    shipIsOnFire: square.isShip && square.isFired,\r\n                    fieldIsOnFire: !square.isShip && square.isFired\r\n                 }"\r\n                 (click)="onOpponentFieldClick(square)">\r\n                <div *ngIf="square.isShip && (square.ship.areAllBlocksFired() || player.allShipsAreOnFire())" class="part part{{square.ship.blocks.length}}_{{ square.blockNum + 1}}"\r\n                     [ngClass]="{ shipHoriszontal: square.ship && square.ship.blocks.length === 1 || square.isShip && !square.ship.isVertical }">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="shipControls">\r\n        <button routerLink="/preparing">Quit</button>\r\n    </div>\r\n</div>'},615:function(e,t){e.exports='<div class="preparingBg" (selectstart)="preventDefault($event)">\r\n\r\n    <div class="fieldBg">\r\n        <div class="shipControls">\r\n            <button (click)="player.randomSet()">Random</button>\r\n            <button routerLink="/battle" [disabled]="!player.allShipsArePlaced()">Start!</button>\r\n            <button (click)="player.clearField()" [disabled]="!player.shipsOnField">Clear</button>\r\n        </div>\r\n        <div class="field">\r\n            <div *ngFor="let row of player.field" class="row">\r\n                <div *ngFor="let square of row"\r\n                     class="square"\r\n                     [ngClass]="{\r\n                        closedForShip: !player.getPlacesForDraggedShip(square, draggedShip).length && draggedShip,\r\n                        placedShip: square.isShip,\r\n                        prePlacedShip: square.isUnderShip\r\n                     }"\r\n                     draggable="true"\r\n                     (drop)="onDrop($event, square)"\r\n                     (dragstart)="onDragStart($event, square.ship)"\r\n                     (dragover)="onDragOver($event, square)"\r\n                     (dragleave)="onDragLeave($event, square)"\r\n                     (dragend)="onDragEnd($event)"\r\n                     (contextmenu)="onContextMenuOnFieldShip($event, square)">\r\n                    <div *ngIf="square.isShip" class="part part{{square.ship.blocks.length}}_{{ square.blockNum + 1}}"\r\n                         [ngClass]="{ shipHoriszontal: square.ship && square.ship.blocks.length === 1 || square.isShip && !square.ship.isVertical }">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="shipControls">\r\n            <button class="rotateHint">\r\n                <sup>*</sup>Use <b>right click</b> to <b>rotate</b> a ship.\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <div class="ships" (contextmenu)="preventDefault($event)">\r\n        <div *ngFor="let shipBlock of player.shipsBySize; let i = index;" class="column">\r\n            <div class="sizeLabel">{{i + 1}}</div>\r\n            <div *ngFor="let ship of shipBlock"\r\n                 class="ship ship_{{ship.blocks.length}} size{{ship.blocks.length}}"\r\n                 draggable="true"\r\n                 (dragstart)="onDragStart($event, ship)"\r\n                 (dragend)="onDragEnd($event)"\r\n                 [ngClass]="{\r\n                    opacity50: ship.isInAir\r\n                 }"\r\n                 (contextmenu)="onContextMenuOutsideShip($event, ship)">\r\n\r\n                <div *ngFor="let part of ship.blocks; let blockNum = index;"\r\n                     class="part part{{ship.blocks.length}}_{{blockNum + 1}}"\r\n                     [ngClass]="{\r\n                        hidden: ship.isOnField,\r\n                        shipHoriszontal: !ship.isVertical || ship.blocks.length === 1\r\n                     }">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n'},631:function(e,t,i){e.exports=i(344)}},[631]);